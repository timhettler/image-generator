var text = 'Lorem ipsum dolor sit amet, consectetur adipiscing elit. In justo nunc, ornare nec viverra at, ultrices accumsan diam. Nulla facilisi. Ut iaculis vulputate velit, non tempor felis viverra in. Nam eget massa auctor, tempor sem et, laoreet felis. Aenean vel erat in nisi imperdiet mollis. Donec porttitor dolor ex, et fringilla lacus gravida non. Morbi id feugiat libero. Phasellus efficitur ligula enim, sit amet dapibus tellus finibus et. Quisque consequat lacus ac turpis bibendum, ac feugiat tortor dictum. Praesent elit justo, ultricies in enim vel, ornare pharetra mauris. Nam maximus tincidunt neque eget rhoncus. Vivamus id semper tellus. Phasellus in aliquet arcu. In porttitor nibh vel ex accumsan sollicitudin. Morbi urna lorem, cursus gravida tellus ut, tristique tristique velit. Aenean at justo eu eros pulvinar tempor. Quisque non augue felis. In placerat tempus auctor. Sed eros mi, laoreet et turpis ut, malesuada scelerisque ligula. Interdum et malesuada fames ac ante ipsum primis in faucibus. Integer vitae dolor sollicitudin lorem laoreet varius at sit amet dui. Duis in porta mauris, euismod feugiat eros. Fusce et hendrerit lacus. Cras id mi dolor. Sed posuere lacus non urna mollis pellentesque. Vestibulum vitae maximus orci, vel sollicitudin ipsum. Sed consequat nunc vitae dolor vestibulum vestibulum. Quisque lectus orci, sollicitudin at suscipit hendrerit, malesuada eget dui. Praesent at varius mi, ac commodo metus. Etiam ornare, leo nec porta condimentum, massa justo facilisis turpis, in elementum orci magna sit amet nunc. Praesent a magna pellentesque, sollicitudin odio id, congue ex. Aliquam vestibulum fringilla nulla, sit amet consectetur quam finibus a. Donec molestie dui in nulla tristique, dictum egestas nulla ultrices. Duis tristique nunc dolor, eget pulvinar risus vulputate quis. Fusce eleifend metus nec nisi imperdiet dignissim. Nullam ut sem eleifend, gravida nibh at, cursus dui. Sed tempus maximus urna nec consequat. Etiam nisl felis, dignissim nec maximus a, bibendum hendrerit leo. Nunc condimentum tortor turpis, in lacinia augue venenatis eu. Proin consectetur lacus eu gravida iaculis. Aliquam eros quam, faucibus at est vitae, vestibulum semper nulla. Nunc justo libero, iaculis vel nibh vel, suscipit faucibus nulla. Aliquam porta a mauris vitae sollicitudin. Integer hendrerit non libero id hendrerit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse accumsan tempor erat, quis hendrerit est dapibus ac. Nullam lacinia quis dui ac feugiat. Mauris luctus lorem sed felis gravida laoreet. Aliquam et magna vitae neque mattis feugiat. Etiam dapibus consequat lacus at luctus. Aenean sed ipsum semper, semper enim eu, varius nisl. Fusce mattis elementum sapien, quis feugiat erat feugiat ac. Etiam ut dignissim justo. Proin accumsan elit dictum odio volutpat consequat. Vivamus lorem dolor, consectetur sed accumsan vitae, dictum a dui. Sed aliquam sed leo ut vulputate. Proin aliquet metus id sapien pulvinar auctor. In ut consectetur mauris. Mauris in nisi ligula. Maecenas varius sollicitudin quam, a molestie ligula. Fusce vel luctus nisi. Ut quis ex sed massa fermentum aliquam. Nulla interdum ipsum massa, nec viverra lacus ornare non. Nam in orci a mauris tempor dictum. Sed ac malesuada quam. Maecenas volutpat nec purus et elementum. Nam maximus in diam vel accumsan. Suspendisse bibendum porttitor tortor id hendrerit. Pellentesque facilisis efficitur mi, non pharetra magna ultricies ut. Suspendisse id vehicula odio. Suspendisse scelerisque velit turpis, a luctus metus ornare non. Sed placerat purus eu dictum gravida. Fusce malesuada, magna sit amet ultricies interdum, diam purus venenatis eros, eget interdum nisi dui vitae nibh. Etiam vel venenatis quam. Vestibulum et scelerisque orci, eget fermentum eros. Ut bibendum nisl sed neque consectetur scelerisque. Integer dictum est quis nibh aliquam, at sagittis enim bibendum. Quisque posuere nisi arcu, laoreet facilisis lorem elementum pulvinar. Suspendisse bibendum odio in purus dapibus varius. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum sit amet eleifend neque, id malesuada augue. Duis aliquet dapibus orci, a porttitor erat cursus a. Sed turpis sem, semper a felis a, rutrum luctus sem. Suspendisse feugiat arcu lacus, in mollis nisl vulputate in. Nam non libero in diam aliquam dictum et ac tortor. Mauris vel mi sem. Praesent eget tincidunt nunc, ut fermentum massa. Integer sit amet placerat ante. Vestibulum sed tempus felis. Praesent tincidunt sollicitudin ex. Ut nulla felis, aliquam non leo vel, sodales maximus leo. Phasellus ornare tellus a mattis vehicula. In vestibulum quam quis dolor ultrices, in bibendum metus porttitor. Nunc nisl quam, posuere at volutpat sed, efficitur eget est. Suspendisse commodo pulvinar fringilla. Suspendisse sodales elit sed ullamcorper cursus. Integer maximus, quam scelerisque aliquam fringilla, arcu dolor tristique dolor, tristique posuere enim felis viverra lacus. Sed at urna nec ante euismod dapibus eu eu velit. Nulla ultrices cursus magna, vitae fringilla turpis consequat sit amet. Aliquam luctus dictum lorem, et facilisis dui vestibulum nec. Quisque placerat metus id urna maximus, a molestie eros sagittis. In in mauris sit amet velit pulvinar luctus quis eu ligula. Sed viverra felis in vulputate pretium. Nulla finibus felis pellentesque justo maximus feugiat. Aliquam efficitur urna quam, eget iaculis ex condimentum quis. Aliquam aliquet tortor purus. Sed non porta libero. Vivamus a egestas neque, eu interdum nisi. In bibendum volutpat orci sagittis facilisis. Aenean in lacus lacus. Morbi euismod tortor nec purus molestie laoreet. Nullam ac odio placerat, tincidunt lectus quis, tincidunt elit. Nulla facilisi. Nullam vitae consequat felis. Morbi consequat ac magna ut luctus. Curabitur a massa dolor. Ut nisi purus, condimentum quis felis sed, accumsan tempor massa. Curabitur eu risus posuere, ornare metus eget, pellentesque augue. Phasellus viverra egestas ligula vitae interdum. Mauris enim nisl, mattis eu sagittis quis, pharetra at metus. Morbi pulvinar suscipit consectetur. Mauris pretium condimentum mauris. Cras varius mauris sed ex luctus, vitae sodales augue aliquet. Etiam arcu lorem, mattis at diam id, finibus auctor lectus. Aenean urna tortor, aliquam nec fringilla nec, feugiat ut mi. Curabitur condimentum sodales magna ac porttitor. Fusce vel congue quam, non laoreet sem. Vestibulum varius iaculis bibendum. Donec libero eros, tristique at purus vitae, hendrerit lacinia lacus. Nullam tincidunt sapien diam, ac sollicitudin lacus blandit vitae. Vestibulum vitae posuere augue. Nulla at erat non eros luctus maximus. Phasellus id arcu faucibus, ultrices velit et, malesuada nisi. In neque nisl, faucibus eu mi quis, venenatis fermentum dolor. Aliquam erat elit, gravida faucibus bibendum non, porttitor nec elit. Mauris dignissim ex sed nisl consequat blandit. Aenean congue sem eget facilisis feugiat. Nullam eget lobortis ligula. Maecenas malesuada velit quis ligula fermentum tempus. Duis tempor urna sapien, sed volutpat dolor aliquam mattis. Proin non nibh orci. Fusce vehicula molestie lorem, sed molestie augue. Curabitur enim urna, dictum at blandit sit amet, vulputate eu orci. Sed elementum odio ligula, vel faucibus nunc feugiat nec. Phasellus non massa non neque consectetur pharetra. Nunc fermentum congue leo ut hendrerit. Sed in augue non ipsum placerat suscipit. Donec non orci quis ligula blandit varius ac eu sem. Morbi eget blandit nunc. Integer eget iaculis enim, sed viverra neque. Fusce congue justo a purus consectetur, pharetra molestie velit pulvinar. Nunc quis consectetur massa. Maecenas eros nunc, interdum vitae euismod eget, dapibus a augue. Nunc ac accumsan ipsum. Curabitur nisi dolor, commodo eu hendrerit vel, dapibus at dolor. Integer dictum dolor suscipit, dapibus nisi et, sodales lectus. Ut non ligula quis lacus varius convallis sit amet vitae sapien. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Duis finibus sem ut velit lacinia hendrerit vel at mi. Aenean semper, est quis tristique pharetra, tellus sapien bibendum lacus, sit amet convallis dui tellus et dui. In elit odio, rutrum ut auctor nec, faucibus quis ante. Nam pharetra risus at diam suscipit ornare. Donec vel erat consectetur, mollis eros id, pharetra arcu. Nunc lorem ipsum, venenatis eu metus eu, dictum convallis odio. Proin eros nulla, posuere vulputate tortor commodo, euismod commodo diam. Donec sit amet nibh id leo vulputate feugiat. Fusce ut urna sapien. In facilisis, justo vel vulputate maximus, massa enim cursus ex, pharetra fermentum ipsum orci quis orci. Nam id urna id tellus scelerisque rutrum quis sed diam. Pellentesque dictum fringilla odio, eget eleifend nulla lobortis et. Donec eget sem hendrerit, dapibus ipsum quis, consequat lacus. Pellentesque venenatis scelerisque diam, vitae consequat turpis convallis ac. Donec nec scelerisque quam, et egestas libero. Donec dictum non est ac varius. Morbi suscipit pellentesque elit eget rhoncus. uspendisse sed venenatis erat. Aliquam finibus eget nisl et imperdiet. Etiam nunc dolor, interdum at turpis dapibus, imperdiet tempor nisl. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Pellentesque facilisis sed elit id laoreet. Phasellus quis mi enim. Quisque vitae aliquet nulla, sit amet gravida nibh. Pellentesque luctus iaculis feugiat. Integer sollicitudin, massa quis aliquet lobortis, massa neque dapibus nisl, sodales finibus ex mauris quis nulla. Ut pharetra, neque nec egestas lacinia, est lorem suscipit diam, eu luctus augue felis sit amet erat. Praesent laoreet, velit ut condimentum malesuada, erat quam laoreet urna, et tempor nisi quam eget nulla. Duis dictum interdum enim, eu gravida ex dapibus id. Sed at neque pulvinar quam fringilla gravida vel faucibus massa. Proin non nulla id mauris molestie auctor. Maecenas sodales facilisis arcu et finibus. Ut id orci augue. Integer nec ornare orci. Curabitur vitae tincidunt nisl. Maecenas molestie faucibus felis, in semper diam finibus vestibulum. Proin a nibh laoreet, egestas odio ornare, posuere leo. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Duis eu nibh malesuada, elementum leo vitae, cursus sapien. Nulla eget lorem urna. Phasellus eget turpis justo. Nunc rhoncus convallis mi, a malesuada justo congue et. Donec dignissim, turpis ac vestibulum volutpat, eros mi feugiat ex, eget elementum orci lectus eget ligula. Cras feugiat lectus vel nisi feugiat auctor ut et turpis. Donec ac mattis turpis. Praesent auctor elementum urna, at dictum est interdum id. Lorem ipsum dolor sit amet, consectetur adipiscing elit. In justo nunc, ornare nec viverra at, ultrices accumsan diam. Nulla facilisi. Ut iaculis vulputate velit, non tempor felis viverra in. Nam eget massa auctor, tempor sem et, laoreet felis. Aenean vel erat in nisi imperdiet mollis. Donec porttitor dolor ex, et fringilla lacus gravida non. Morbi id feugiat libero. Phasellus efficitur ligula enim, sit amet dapibus tellus finibus et. Quisque consequat lacus ac turpis bibendum, ac feugiat tortor dictum. Praesent elit justo, ultricies in enim vel, ornare pharetra mauris. Nam maximus tincidunt neque eget rhoncus. Vivamus id semper tellus. Phasellus in aliquet arcu. In porttitor nibh vel ex accumsan sollicitudin. Morbi urna lorem, cursus gravida tellus ut, tristique tristique velit. Aenean at justo eu eros pulvinar tempor. Quisque non augue felis. In placerat tempus auctor. Sed eros mi, laoreet et turpis ut, malesuada scelerisque ligula. Interdum et malesuada fames ac ante ipsum primis in faucibus. Integer vitae dolor sollicitudin lorem laoreet varius at sit amet dui. Duis in porta mauris, euismod feugiat eros. Fusce et hendrerit lacus. Cras id mi dolor. Sed posuere lacus non urna mollis pellentesque. Vestibulum vitae maximus orci, vel sollicitudin ipsum. Sed consequat nunc vitae dolor vestibulum vestibulum. Quisque lectus orci, sollicitudin at suscipit hendrerit, malesuada eget dui. Praesent at varius mi, ac commodo metus. Etiam ornare, leo nec porta condimentum, massa justo facilisis turpis, in elementum orci magna sit amet nunc. Praesent a magna pellentesque, sollicitudin odio id, congue ex. Aliquam vestibulum fringilla nulla, sit amet consectetur quam finibus a. Donec molestie dui in nulla tristique, dictum egestas nulla ultrices. Duis tristique nunc dolor, eget pulvinar risus vulputate quis. Fusce eleifend metus nec nisi imperdiet dignissim. Nullam ut sem eleifend, gravida nibh at, cursus dui. Sed tempus maximus urna nec consequat. Etiam nisl felis, dignissim nec maximus a, bibendum hendrerit leo. Nunc condimentum tortor turpis, in lacinia augue venenatis eu. Proin consectetur lacus eu gravida iaculis. Aliquam eros quam, faucibus at est vitae, vestibulum semper nulla. Nunc justo libero, iaculis vel nibh vel, suscipit faucibus nulla. Aliquam porta a mauris vitae sollicitudin. Integer hendrerit non libero id hendrerit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse accumsan tempor erat, quis hendrerit est dapibus ac. Nullam lacinia quis dui ac feugiat. Mauris luctus lorem sed felis gravida laoreet. Aliquam et magna vitae neque mattis feugiat. Etiam dapibus consequat lacus at luctus. Aenean sed ipsum semper, semper enim eu, varius nisl. Fusce mattis elementum sapien, quis feugiat erat feugiat ac. Etiam ut dignissim justo. Proin accumsan elit dictum odio volutpat consequat. Vivamus lorem dolor, consectetur sed accumsan vitae, dictum a dui. Sed aliquam sed leo ut vulputate. Proin aliquet metus id sapien pulvinar auctor. In ut consectetur mauris. Mauris in nisi ligula. Maecenas varius sollicitudin quam, a molestie ligula. Fusce vel luctus nisi. Ut quis ex sed massa fermentum aliquam. Nulla interdum ipsum massa, nec viverra lacus ornare non. Nam in orci a mauris tempor dictum. Sed ac malesuada quam. Maecenas volutpat nec purus et elementum. Nam maximus in diam vel accumsan. Suspendisse bibendum porttitor tortor id hendrerit. Pellentesque facilisis efficitur mi, non pharetra magna ultricies ut. Suspendisse id vehicula odio. Suspendisse scelerisque velit turpis, a luctus metus ornare non. Sed placerat purus eu dictum gravida. Fusce malesuada, magna sit amet ultricies interdum, diam purus venenatis eros, eget interdum nisi dui vitae nibh. Etiam vel venenatis quam. Vestibulum et scelerisque orci, eget fermentum eros. Ut bibendum nisl sed neque consectetur scelerisque. Integer dictum est quis nibh aliquam, at sagittis enim bibendum. Quisque posuere nisi arcu, laoreet facilisis lorem elementum pulvinar. Suspendisse bibendum odio in purus dapibus varius. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum sit amet eleifend neque, id malesuada augue. Duis aliquet dapibus orci, a porttitor erat cursus a. Sed turpis sem, semper a felis a, rutrum luctus sem. Suspendisse feugiat arcu lacus, in mollis nisl vulputate in. Nam non libero in diam aliquam dictum et ac tortor. Mauris vel mi sem. Praesent eget tincidunt nunc, ut fermentum massa. Integer sit amet placerat ante. Vestibulum sed tempus felis. Praesent tincidunt sollicitudin ex. Ut nulla felis, aliquam non leo vel, sodales maximus leo. Phasellus ornare tellus a mattis vehicula. In vestibulum quam quis dolor ultrices, in bibendum metus porttitor. Nunc nisl quam, posuere at volutpat sed, efficitur eget est. Suspendisse commodo pulvinar fringilla. Suspendisse sodales elit sed ullamcorper cursus. Integer maximus, quam scelerisque aliquam fringilla, arcu dolor tristique dolor, tristique posuere enim felis viverra lacus. Sed at urna nec ante euismod dapibus eu eu velit. Nulla ultrices cursus magna, vitae fringilla turpis consequat sit amet. Aliquam luctus dictum lorem, et facilisis dui vestibulum nec. Quisque placerat metus id urna maximus, a molestie eros sagittis. In in mauris sit amet velit pulvinar luctus quis eu ligula. Sed viverra felis in vulputate pretium. Nulla finibus felis pellentesque justo maximus feugiat. Aliquam efficitur urna quam, eget iaculis ex condimentum quis. Aliquam aliquet tortor purus. Sed non porta libero. Vivamus a egestas neque, eu interdum nisi. In bibendum volutpat orci sagittis facilisis. Aenean in lacus lacus. Morbi euismod tortor nec purus molestie laoreet. Nullam ac odio placerat, tincidunt lectus quis, tincidunt elit. Nulla facilisi. Nullam vitae consequat felis. Morbi consequat ac magna ut luctus. Curabitur a massa dolor. Ut nisi purus, condimentum quis felis sed, accumsan tempor massa. Curabitur eu risus posuere, ornare metus eget, pellentesque augue. Phasellus viverra egestas ligula vitae interdum. Mauris enim nisl, mattis eu sagittis quis, pharetra at metus. Morbi pulvinar suscipit consectetur. Mauris pretium condimentum mauris. Cras varius mauris sed ex luctus, vitae sodales augue aliquet. Etiam arcu lorem, mattis at diam id, finibus auctor lectus. Aenean urna tortor, aliquam nec fringilla nec, feugiat ut mi. Curabitur condimentum sodales magna ac porttitor. Fusce vel congue quam, non laoreet sem. Vestibulum varius iaculis bibendum. Donec libero eros, tristique at purus vitae, hendrerit lacinia lacus. Nullam tincidunt sapien diam, ac sollicitudin lacus blandit vitae. Vestibulum vitae posuere augue. Nulla at erat non eros luctus maximus. Phasellus id arcu faucibus, ultrices velit et, malesuada nisi. In neque nisl, faucibus eu mi quis, venenatis fermentum dolor. Aliquam erat elit, gravida faucibus bibendum non, porttitor nec elit. Mauris dignissim ex sed nisl consequat blandit. Aenean congue sem eget facilisis feugiat. Nullam eget lobortis ligula. Maecenas malesuada velit quis ligula fermentum tempus. Duis tempor urna sapien, sed volutpat dolor aliquam mattis. Proin non nibh orci. Fusce vehicula molestie lorem, sed molestie augue. Curabitur enim urna, dictum at blandit sit amet, vulputate eu orci. Sed elementum odio ligula, vel faucibus nunc feugiat nec. Phasellus non massa non neque consectetur pharetra. Nunc fermentum congue leo ut hendrerit. Sed in augue non ipsum placerat suscipit. Donec non orci quis ligula blandit varius ac eu sem. Morbi eget blandit nunc. Integer eget iaculis enim, sed viverra neque. Fusce congue justo a purus consectetur, pharetra molestie velit pulvinar. Nunc quis consectetur massa. Maecenas eros nunc, interdum vitae euismod eget, dapibus a augue. Nunc ac accumsan ipsum. Curabitur nisi dolor, commodo eu hendrerit vel, dapibus at dolor. Integer dictum dolor suscipit, dapibus nisi et, sodales lectus. Ut non ligula quis lacus varius convallis sit amet vitae sapien. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Duis finibus sem ut velit lacinia hendrerit vel at mi. Aenean semper, est quis tristique pharetra, tellus sapien bibendum lacus, sit amet convallis dui tellus et dui. In elit odio, rutrum ut auctor nec, faucibus quis ante. Nam pharetra risus at diam suscipit ornare. Donec vel erat consectetur, mollis eros id, pharetra arcu. Nunc lorem ipsum, venenatis eu metus eu, dictum convallis odio. Proin eros nulla, posuere vulputate tortor commodo, euismod commodo diam. Donec sit amet nibh id leo vulputate feugiat. Fusce ut urna sapien. In facilisis, justo vel vulputate maximus, massa enim cursus ex, pharetra fermentum ipsum orci quis orci. Nam id urna id tellus scelerisque rutrum quis sed diam. Pellentesque dictum fringilla odio, eget eleifend nulla lobortis et. Donec eget sem hendrerit, dapibus ipsum quis, consequat lacus. Pellentesque venenatis scelerisque diam, vitae consequat turpis convallis ac. Donec nec scelerisque quam, et egestas libero. Donec dictum non est ac varius. Morbi suscipit pellentesque elit eget rhoncus. uspendisse sed venenatis erat. Aliquam finibus eget nisl et imperdiet. Etiam nunc dolor, interdum at turpis dapibus, imperdiet tempor nisl. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Pellentesque facilisis sed elit id laoreet. Phasellus quis mi enim. Quisque vitae aliquet nulla, sit amet gravida nibh. Pellentesque luctus iaculis feugiat. Integer sollicitudin, massa quis aliquet lobortis, massa neque dapibus nisl, sodales finibus ex mauris quis nulla. Ut pharetra, neque nec egestas lacinia, est lorem suscipit diam, eu luctus augue felis sit amet erat. Praesent laoreet, velit ut condimentum malesuada, erat quam laoreet urna, et tempor nisi quam eget nulla. Duis dictum interdum enim, eu gravida ex dapibus id. Sed at neque pulvinar quam fringilla gravida vel faucibus massa. Proin non nulla id mauris molestie auctor. Maecenas sodales facilisis arcu et finibus. Ut id orci augue. Integer nec ornare orci. Curabitur vitae tincidunt nisl. Maecenas molestie faucibus felis, in semper diam finibus vestibulum. Proin a nibh laoreet, egestas odio ornare, posuere leo. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Duis eu nibh malesuada, elementum leo vitae, cursus sapien. Nulla eget lorem urna. Phasellus eget turpis justo. Nunc rhoncus convallis mi, a malesuada justo congue et. Donec dignissim, turpis ac vestibulum volutpat, eros mi feugiat ex, eget elementum orci lectus eget ligula. Cras feugiat lectus vel nisi feugiat auctor ut et turpis. Donec ac mattis turpis. Praesent auctor elementum urna, at dictum est interdum id. Lorem ipsum dolor sit amet, consectetur adipiscing elit. In justo nunc, ornare nec viverra at, ultrices accumsan diam. Nulla facilisi. Ut iaculis vulputate velit, non tempor felis viverra in. Nam eget massa auctor, tempor sem et, laoreet felis. Aenean vel erat in nisi imperdiet mollis. Donec porttitor dolor ex, et fringilla lacus gravida non. Morbi id feugiat libero. Phasellus efficitur ligula enim, sit amet dapibus tellus finibus et. Quisque consequat lacus ac turpis bibendum, ac feugiat tortor dictum. Praesent elit justo, ultricies in enim vel, ornare pharetra mauris. Nam maximus tincidunt neque eget rhoncus. Vivamus id semper tellus. Phasellus in aliquet arcu. In porttitor nibh vel ex accumsan sollicitudin. Morbi urna lorem, cursus gravida tellus ut, tristique tristique velit. Aenean at justo eu eros pulvinar tempor. Quisque non augue felis. In placerat tempus auctor. Sed eros mi, laoreet et turpis ut, malesuada scelerisque ligula. Interdum et malesuada fames ac ante ipsum primis in faucibus. Integer vitae dolor sollicitudin lorem laoreet varius at sit amet dui. Duis in porta mauris, euismod feugiat eros. Fusce et hendrerit lacus. Cras id mi dolor. Sed posuere lacus non urna mollis pellentesque. Vestibulum vitae maximus orci, vel sollicitudin ipsum. Sed consequat nunc vitae dolor vestibulum vestibulum. Quisque lectus orci, sollicitudin at suscipit hendrerit, malesuada eget dui. Praesent at varius mi, ac commodo metus. Etiam ornare, leo nec porta condimentum, massa justo facilisis turpis, in elementum orci magna sit amet nunc. Praesent a magna pellentesque, sollicitudin odio id, congue ex. Aliquam vestibulum fringilla nulla, sit amet consectetur quam finibus a. Donec molestie dui in nulla tristique, dictum egestas nulla ultrices. Duis tristique nunc dolor, eget pulvinar risus vulputate quis. Fusce eleifend metus nec nisi imperdiet dignissim. Nullam ut sem eleifend, gravida nibh at, cursus dui. Sed tempus maximus urna nec consequat. Etiam nisl felis, dignissim nec maximus a, bibendum hendrerit leo. Nunc condimentum tortor turpis, in lacinia augue venenatis eu. Proin consectetur lacus eu gravida iaculis. Aliquam eros quam, faucibus at est vitae, vestibulum semper nulla. Nunc justo libero, iaculis vel nibh vel, suscipit faucibus nulla. Aliquam porta a mauris vitae sollicitudin. Integer hendrerit non libero id hendrerit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse accumsan tempor erat, quis hendrerit est dapibus ac. Nullam lacinia quis dui ac feugiat. Mauris luctus lorem sed felis gravida laoreet. Aliquam et magna vitae neque mattis feugiat. Etiam dapibus consequat lacus at luctus. Aenean sed ipsum semper, semper enim eu, varius nisl. Fusce mattis elementum sapien, quis feugiat erat feugiat ac. Etiam ut dignissim justo. Proin accumsan elit dictum odio volutpat consequat. Vivamus lorem dolor, consectetur sed accumsan vitae, dictum a dui. Sed aliquam sed leo ut vulputate. Proin aliquet metus id sapien pulvinar auctor. In ut consectetur mauris. Mauris in nisi ligula. Maecenas varius sollicitudin quam, a molestie ligula. Fusce vel luctus nisi. Ut quis ex sed massa fermentum aliquam. Nulla interdum ipsum massa, nec viverra lacus ornare non. Nam in orci a mauris tempor dictum. Sed ac malesuada quam. Maecenas volutpat nec purus et elementum. Nam maximus in diam vel accumsan. Suspendisse bibendum porttitor tortor id hendrerit. Pellentesque facilisis efficitur mi, non pharetra magna ultricies ut. Suspendisse id vehicula odio. Suspendisse scelerisque velit turpis, a luctus metus ornare non. Sed placerat purus eu dictum gravida. Fusce malesuada, magna sit amet ultricies interdum, diam purus venenatis eros, eget interdum nisi dui vitae nibh. Etiam vel venenatis quam. Vestibulum et scelerisque orci, eget fermentum eros. Ut bibendum nisl sed neque consectetur scelerisque. Integer dictum est quis nibh aliquam, at sagittis enim bibendum. Quisque posuere nisi arcu, laoreet facilisis lorem elementum pulvinar. Suspendisse bibendum odio in purus dapibus varius. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum sit amet eleifend neque, id malesuada augue. Duis aliquet dapibus orci, a porttitor erat cursus a. Sed turpis sem, semper a felis a, rutrum luctus sem. Suspendisse feugiat arcu lacus, in mollis nisl vulputate in. Nam non libero in diam aliquam dictum et ac tortor. Mauris vel mi sem. Praesent eget tincidunt nunc, ut fermentum massa. Integer sit amet placerat ante. Vestibulum sed tempus felis. Praesent tincidunt sollicitudin ex. Ut nulla felis, aliquam non leo vel, sodales maximus leo. Phasellus ornare tellus a mattis vehicula. In vestibulum quam quis dolor ultrices, in bibendum metus porttitor. Nunc nisl quam, posuere at volutpat sed, efficitur eget est. Suspendisse commodo pulvinar fringilla. Suspendisse sodales elit sed ullamcorper cursus. Integer maximus, quam scelerisque aliquam fringilla, arcu dolor tristique dolor, tristique posuere enim felis viverra lacus. Sed at urna nec ante euismod dapibus eu eu velit. Nulla ultrices cursus magna, vitae fringilla turpis consequat sit amet. Aliquam luctus dictum lorem, et facilisis dui vestibulum nec. Quisque placerat metus id urna maximus, a molestie eros sagittis. In in mauris sit amet velit pulvinar luctus quis eu ligula. Sed viverra felis in vulputate pretium. Nulla finibus felis pellentesque justo maximus feugiat. Aliquam efficitur urna quam, eget iaculis ex condimentum quis. Aliquam aliquet tortor purus. Sed non porta libero. Vivamus a egestas neque, eu interdum nisi. In bibendum volutpat orci sagittis facilisis. Aenean in lacus lacus. Morbi euismod tortor nec purus molestie laoreet. Nullam ac odio placerat, tincidunt lectus quis, tincidunt elit. Nulla facilisi. Nullam vitae consequat felis. Morbi consequat ac magna ut luctus. Curabitur a massa dolor. Ut nisi purus, condimentum quis felis sed, accumsan tempor massa. Curabitur eu risus posuere, ornare metus eget, pellentesque augue. Phasellus viverra egestas ligula vitae interdum. Mauris enim nisl, mattis eu sagittis quis, pharetra at metus. Morbi pulvinar suscipit consectetur. Mauris pretium condimentum mauris. Cras varius mauris sed ex luctus, vitae sodales augue aliquet. Etiam arcu lorem, mattis at diam id, finibus auctor lectus. Aenean urna tortor, aliquam nec fringilla nec, feugiat ut mi. Curabitur condimentum sodales magna ac porttitor. Fusce vel congue quam, non laoreet sem. Vestibulum varius iaculis bibendum. Donec libero eros, tristique at purus vitae, hendrerit lacinia lacus. Nullam tincidunt sapien diam, ac sollicitudin lacus blandit vitae. Vestibulum vitae posuere augue. Nulla at erat non eros luctus maximus. Phasellus id arcu faucibus, ultrices velit et, malesuada nisi. In neque nisl, faucibus eu mi quis, venenatis fermentum dolor. Aliquam erat elit, gravida faucibus bibendum non, porttitor nec elit. Mauris dignissim ex sed nisl consequat blandit. Aenean congue sem eget facilisis feugiat. Nullam eget lobortis ligula. Maecenas malesuada velit quis ligula fermentum tempus. Duis tempor urna sapien, sed volutpat dolor aliquam mattis. Proin non nibh orci. Fusce vehicula molestie lorem, sed molestie augue. Curabitur enim urna, dictum at blandit sit amet, vulputate eu orci. Sed elementum odio ligula, vel faucibus nunc feugiat nec. Phasellus non massa non neque consectetur pharetra. Nunc fermentum congue leo ut hendrerit. Sed in augue non ipsum placerat suscipit. Donec non orci quis ligula blandit varius ac eu sem. Morbi eget blandit nunc. Integer eget iaculis enim, sed viverra neque. Fusce congue justo a purus consectetur, pharetra molestie velit pulvinar. Nunc quis consectetur massa. Maecenas eros nunc, interdum vitae euismod eget, dapibus a augue. Nunc ac accumsan ipsum. Curabitur nisi dolor, commodo eu hendrerit vel, dapibus at dolor. Integer dictum dolor suscipit, dapibus nisi et, sodales lectus. Ut non ligula quis lacus varius convallis sit amet vitae sapien. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Duis finibus sem ut velit lacinia hendrerit vel at mi. Aenean semper, est quis tristique pharetra, tellus sapien bibendum lacus, sit amet convallis dui tellus et dui. In elit odio, rutrum ut auctor nec, faucibus quis ante. Nam pharetra risus at diam suscipit ornare. Donec vel erat consectetur, mollis eros id, pharetra arcu. Nunc lorem ipsum, venenatis eu metus eu, dictum convallis odio. Proin eros nulla, posuere vulputate tortor commodo, euismod commodo diam. Donec sit amet nibh id leo vulputate feugiat. Fusce ut urna sapien. In facilisis, justo vel vulputate maximus, massa enim cursus ex, pharetra fermentum ipsum orci quis orci. Nam id urna id tellus scelerisque rutrum quis sed diam. Pellentesque dictum fringilla odio, eget eleifend nulla lobortis et. Donec eget sem hendrerit, dapibus ipsum quis, consequat lacus. Pellentesque venenatis scelerisque diam, vitae consequat turpis convallis ac. Donec nec scelerisque quam, et egestas libero. Donec dictum non est ac varius. Morbi suscipit pellentesque elit eget rhoncus. uspendisse sed venenatis erat. Aliquam finibus eget nisl et imperdiet. Etiam nunc dolor, interdum at turpis dapibus, imperdiet tempor nisl. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Pellentesque facilisis sed elit id laoreet. Phasellus quis mi enim. Quisque vitae aliquet nulla, sit amet gravida nibh. Pellentesque luctus iaculis feugiat. Integer sollicitudin, massa quis aliquet lobortis, massa neque dapibus nisl, sodales finibus ex mauris quis nulla. Ut pharetra, neque nec egestas lacinia, est lorem suscipit diam, eu luctus augue felis sit amet erat. Praesent laoreet, velit ut condimentum malesuada, erat quam laoreet urna, et tempor nisi quam eget nulla. Duis dictum interdum enim, eu gravida ex dapibus id. Sed at neque pulvinar quam fringilla gravida vel faucibus massa. Proin non nulla id mauris molestie auctor. Maecenas sodales facilisis arcu et finibus. Ut id orci augue. Integer nec ornare orci. Curabitur vitae tincidunt nisl. Maecenas molestie faucibus felis, in semper diam finibus vestibulum. Proin a nibh laoreet, egestas odio ornare, posuere leo. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Duis eu nibh malesuada, elementum leo vitae, cursus sapien. Nulla eget lorem urna. Phasellus eget turpis justo. Nunc rhoncus convallis mi, a malesuada justo congue et. Donec dignissim, turpis ac vestibulum volutpat, eros mi feugiat ex, eget elementum orci lectus eget ligula. Cras feugiat lectus vel nisi feugiat auctor ut et turpis. Donec ac mattis turpis. Praesent auctor elementum urna, at dictum est interdum id.';

var BragBag = function (svgUrl) {
  var xcanvas,
      scale = 1,
      $canvas = $('<canvas/>'),
      currentLayer = 0,
      canvasData,
      ctx,
      pointFill = '#ff0000',
      globalLineHeight = 0.9,
      bgFill = '#ffffff',
      bgColor = '#aaaaaa',
      bgSize = '8',
      pointData = [],
      layerData = [
        {
          fill: '#111111',
          color: '#000000',
          size: '12',
          mask: false
        },
        {
          fill: '#111111',
          color: '#666666',
          size: '20',
          mask: true
        },
        {
          fill: '#111111',
          color: '#666666',
          size: '20',
          mask: true
        },
        {
          fill: '#111111',
          color: '#666666',
          size: '20',
          mask: true
        },
        {
          fill: '#111111',
          color: '#666666',
          size: '30',
          mask: true
        }
      ];

  this.svgUrl = svgUrl;

  this.init = function () {
    var _self = this;

    xcanvas = new jsCanvas ('vector');
    xcanvas.canvas.style.display = 'none';

    _self.fetchSvg(_self.svgUrl).then(function (svg) {
      xcanvas.compile (svg, function () {

        canvasData = xcanvas.export();

        $canvas.attr({
            'width': xcanvas.canvas.width*scale,
            'height': xcanvas.canvas.height*scale
          })
          .appendTo(document.body);

        ctx = $canvas[0].getContext('2d');

        ctx.setTransform(1, 0, 0, 1, 0, 0);
        ctx.scale (scale, scale);

        _self.resetCanvas();
        _self.getAllPointData();
        _self.resetCanvas();
        _self.drawBackground();
        _self.drawLayers();
      });
    });
  };

  this.fetchSvg = function (url) {
    return new Promise(function (resolve, reject) {
      var request = new XMLHttpRequest();
      request.open('GET', url, true);

      request.onload = function() {
        if (request.status >= 200 && request.status < 400) {
          var resp = request.responseText;
          resolve(resp);
        }
      };

      request.send();
    });
  };

  this.getLineHeight = function (size) {
    return size * globalLineHeight;
  };

  this.resetCanvas = function () {
    ctx.beginPath();
    ctx.rect(0, 0, xcanvas.canvas.width, xcanvas.canvas.height);
    ctx.fillStyle = bgFill;
    ctx.fill();
  };

  this.loopThroughLayers = function (onPathEnd) {
    currentLayer = 0;

    for (var i = 0; i < canvasData.length; i++) {
      switch (canvasData[i].fn) {
        case 'fill':
          onPathEnd.call(this);
          currentLayer++;
          break;
        case 'stroke':
          break;
        default:
          ctx[canvasData[i].fn].apply(ctx, canvasData[i].args);
          break;
      }
    }
  };

  this.drawLayers = function () {
    var onPathEnd = function () {
      if (layerData[currentLayer]) {
        ctx.clip();
        this.maskText(layerData[currentLayer].fill, layerData[currentLayer].color, layerData[currentLayer].size);
        ctx.restore();
        ctx.save();
      }
    };

    ctx.save();
    this.loopThroughLayers(onPathEnd);
  };

  this.getAllPointData = function () {
    var onPathEnd = function () {
      if (layerData[currentLayer] && layerData[currentLayer].mask === true) {
        ctx.save();
        this.getPointData();
        ctx.restore();
        this.resetCanvas();
      }
    };

    this.loopThroughLayers(onPathEnd);
  };

  this.getPointData = function () {
    var increment = this.getLineHeight(layerData[currentLayer].size),
        y = 0,
        yMax = xcanvas.canvas.height,
        yData = [];
    
    ctx.fillStyle = pointFill;
    ctx.fill();

    while(y < yMax) {
      var x = 0,
          xMax = xcanvas.canvas.width,
          xData = [];

      while(x < xMax) {
        var data = ctx.getImageData(x, y, 1, 1).data;
        var hex = '#' + ('000000' + rgbToHex(data[0], data[1], data[2])).slice(-6).toLowerCase();
        if (hex !== bgFill) {
          xData.push(x);
        }
        x++;
      }

      if (xData.length > 1) {
        yData.push({
          y: y,
          x: xData[0],
          w: xData[xData.length-1] - xData[0]
        });
      }
      y += increment;
    }

    pointData[currentLayer] = yData;
  };

  this.drawBackground = function () {
    ctx.beginPath();
    ctx.fillStyle = bgColor;
    ctx.font = ['800', bgSize+'px', 'Open Sans'].join(' ');
    ctx.textBaseline = 'top';
    this.wrapFullText(bgSize);
  };

  this.maskText = function (fill, color, size) {
    var command;
    var weight;

    if (layerData[currentLayer].mask === true) {
      command = 'wrapMaskingText';
      weight = '600';
    } else {
      command = 'wrapFullText';
      weight = '800';
    }

    ctx.fillStyle = fill;
    ctx.fill();
    ctx.fillStyle = color;
    ctx.font = [weight, size+'px', 'Open Sans'].join(' ');
    ctx.textBaseline = 'top';
    this[command](size);
  };

  // http://www.html5canvastutorials.com/tutorials/html5-canvas-wrap-text-tutorial/
  this.wrapFullText = function (size) {
    var wordToken = 0;
    var words = text.toUpperCase().split(' ');
    var lineHeight = this.getLineHeight(size);
    var totalLines = Math.ceil(xcanvas.canvas.height/lineHeight);

    for(var l = 0; l < totalLines; l++) {
      var line = '';
      while (true) {
        var testLine = line + words[wordToken % words.length] + ' ';
        var metrics = ctx.measureText(testLine);
        var testWidth = metrics.width;
        wordToken++;

        if (testWidth > xcanvas.canvas.width) {
          ctx.fillText(testLine, 0, l*lineHeight);
          break;
        }
        else {
          line = testLine;
        }
      }
    }
  };

  this.wrapMaskingText = function (size) {
    var wordToken = 0;
    var words = text.toUpperCase().split(' ');
    var n = 0;


    for(var p = 0; p < pointData[currentLayer].length; p++) {
      var pData = pointData[currentLayer][p];
      var line = '';

      while (true) {
        var testLine = line + words[wordToken % words.length] + ' ';
        var metrics = ctx.measureText(testLine);
        var testWidth = metrics.width;
        wordToken++;

        if (testWidth > pData.w) {
          ctx.fillText(testLine, pData.x, pData.y);
          break;
        }
        else {
          line = testLine;
        }
      }
    }
  };

  this.init();

};